{% extends "base.html" %}

{% block content %}
{{ total_pnl }}
<h1>List of Trades</h1>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Symbol</th>
            <th>Status</th>
            <th>Instrument</th>
            <th>Open Date</th>
            <th>Adjusted Cost</th>
            <th>Adjusted Proceeds</th>
            <th>PNL</th>
            <th>PNL %</th>
        </tr>
    </thead>
    <tbody>
        {% for trade in trades %}
        <tr data-href="{{ url_for('trades_bp.trade_details', trade_id=trade.id) }}" class="table-row">
            <td>{{ trade.symbol }}</td>
            <td>
                {% if trade.status == 'win' %}
                <span class="badge bg-success">{{ trade.status }}</span>
                {% elif trade.status == 'loss' %}
                <span class="badge bg-danger">{{ trade.status }}</span>
                {% else %}
                <span class="badge bg-warning">{{ trade.status }}</span>
                {% endif %}
            </td>
            <td>{{ trade.instrument }}</td>
            <td>{{ trade.open_date }}</td>
            <td>{{ trade.adjusted_cost }}</td>
            <td>{{ trade.adjusted_proceeds }}</td>
            <td class="{% if trade.pnl > 0 %}text-success{% elif trade.pnl < 0 %}text-danger{% endif %}">{{ trade.pnl }}
            </td>
            <td
                class="{% if trade.pnl_percent > 0 %}text-success{% elif trade.pnl_percent < 0 %}text-danger{% endif %}">
                {{ trade.pnl_percent }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<script>
    $(document).ready(function () {
        // Add hover effect to clickable rows
        $("tr[data-href]").on("mouseenter", function () {
            $(this).addClass("hover");
        }).on("mouseleave", function () {
            $(this).removeClass("hover");
        });

        // Redirect to trade details page when clicking on a row
        $("tr[data-href]").on("click", function () {
            window.location.href = $(this).data("href");
        });
    });

</script>
<style>
    .table-row:hover {
        background-color: #f5f5f5;
        cursor: pointer;
    }
</style>

{% endblock %}